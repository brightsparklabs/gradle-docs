{#
 # Macros for inserting text commonly used by brightSPARK Labs.
 #}

{#
 # Adds the default Asciidoc attributes:
 # - `revnumber` set to last commit hash.
 # - `revdate` set to last commit timestamp as ISO (UTC) with spaces.
 # - `Author Initials` set to BSL.
 # - `toc` set to left.
 # - `toclevels` set to 4.
 # - `sectnums` enabled.
 # - `sectnumlevels` set to 5.
 # - `chapter-signifier` removes the `Chapter` prefix added by `sectnums`.
 #}
{%- macro add_default_attributes() -%}
:revnumber: {{ output_file.last_commit.hash }}
:revdate: {{ output_file.last_commit.timestamp_formatted.iso_utc_space }}
:Author Initials: BSL
:toc: left
:toclevels: 4
:sectnums:
:sectnumlevels: 5
:!chapter-signifier:
{%- endmacro bsl_default_attributes() -%}

{#
 # Formats the date/datetime object as: DD/MM/YYYY.
 #
 # Args:
 #   date_object: A date/datetime object.
 #}
{%- macro format_date(date_object)) -%}
{{ date_object|datetimeformat("%d/%m/%Y") }}
{%- endmacro format_date() -%}

{#
 # Formats the date/datetime object as: YYYY-MM-DD.
 #
 # Args:
 #   date_object: A date/datetime object.
 #}
{%- macro format_date_iso(date_object)) -%}
{{ date_object|datetimeformat("%Y-%m-%d") }}
{%- endmacro format_date_iso() -%}

{#
 # Formats a float as currency.
 #
 # E.g. 123456.789 -> $1,234,456.78.
 #
 # Args:
 #   value: A float.
 #}
{%- macro format_currency(value)) -%}
${{ "%,.2f"|format(value) }}
{%- endmacro format_currency(value)) -%}
